/*C3*/SET SCHEMA PUBLIC
alter table consulta drop constraint FK3s8ln1u0u55p8w8ycl18ka1w6
alter table consulta drop constraint FKqqvh291chw37w0rwemtlhhc8i
alter table Medico drop constraint FKesalvg2nfvs4f2isx1fi8fpcr
alter table Paciente drop constraint FKfl7326ml8kywo3j5yda0xkjvd
drop table consulta if exists
drop table Especializacao if exists
drop table Medico if exists
drop table Paciente if exists
drop table Quarto if exists
drop sequence hibernate_sequence
create sequence hibernate_sequence start with 1 increment by 1
create table consulta (IdConsulta bigint not null, DataConsulta timestamp, IdMedico bigint, IdPaciente bigint, primary key (IdConsulta))
create table Especializacao (id bigint generated by default as identity (start with 1), descricao varchar(255) not null, primary key (id))
create table Medico (IdMedico bigint generated by default as identity (start with 1), CRM varchar(255) not null, Nome varchar(255) not null, Salario double not null, especializacao_id bigint not null, primary key (IdMedico))
create table Paciente (IdPaciente bigint generated by default as identity (start with 1), CPF varchar(255), DtNascimento timestamp, Endereco varchar(255), Nome varchar(255) not null, RG varchar(255), Telefone varchar(255), quarto_Numero varchar(255) not null, primary key (IdPaciente))
create table Quarto (Numero varchar(255) not null, Nome varchar(255), primary key (Numero))
alter table Especializacao add constraint UK32l844wnx5ejd93f5683b698j unique (descricao)
alter table Medico add constraint UKt8qgs6wqj68qjbt98ofu1bk1i unique (CRM)
alter table Paciente add constraint UKhvlpsf3ud82163eo6v17rnwum unique (CPF, RG)
alter table Paciente add constraint UK_nd0k81wydcycd6abjwhs7y42f unique (CPF)
alter table Paciente add constraint UK_ijiejatonur8lv1owpssro7e1 unique (RG)
alter table consulta add constraint FK3s8ln1u0u55p8w8ycl18ka1w6 foreign key (IdMedico) references Medico
alter table consulta add constraint FKqqvh291chw37w0rwemtlhhc8i foreign key (IdPaciente) references Paciente
alter table Medico add constraint FKesalvg2nfvs4f2isx1fi8fpcr foreign key (especializacao_id) references Especializacao
alter table Paciente add constraint FKfl7326ml8kywo3j5yda0xkjvd foreign key (quarto_Numero) references Quarto
INSERT INTO QUARTO VALUES('245','2B')
INSERT INTO ESPECIALIZACAO VALUES(1,'Urologia')
INSERT INTO MEDICO VALUES(1,'0001','Carlos',2500.45E0,1)
INSERT INTO PACIENTE VALUES(1,'12345678911','1967-10-28 13:24:00.000000','Rua sem nome','Pedro','1234567891','(051) 1122-3344','245')
INSERT INTO CONSULTA VALUES(1,'1967-10-28 13:24:00.000000',1,1)
INSERT INTO PACIENTE VALUES(2,'12345678918','1967-10-28 13:24:00.000000','Rua sem nome','Pedro','1234567898','(051) 1122-3344','245')
COMMIT
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
/*C3*/SET SCHEMA PUBLIC
set schema PUBLIC
DISCONNECT
